**Repo Summary**
- **What:** A generated Python SDK (Stainless) providing both sync and async clients for the Cerebras REST API.
- **Where to look:** primary code under `src/cerebras/cloud/sdk/` (see `_client.py`, `_base_client.py`, `resources/`).

**Big Picture / Architecture**
- Generated SDK: most source is generated by Stainless — generated files include a header comment `File generated from our OpenAPI spec by Stainless`.
- Dual API surface: `Cerebras` (sync) and `AsyncCerebras` (async). They share logic in `_base_client.py` and expose per-resource submodules under `resources/` (e.g., `chat`, `completions`, `models`).
- HTTP: Uses `httpx` (sync + async). Supports custom `httpx` clients, a `DefaultHttpxClient` and `DefaultAsyncHttpxClient`, and optional `aiohttp` backend (`DefaultAioHttpClient`).
- Types: Request params use `TypedDict` patterns; responses are `pydantic` models. The code leverages `NotGiven`, `Omit`, and `FinalRequestOptions` helpers for request construction.
- Streaming: SSE streaming support via `_streaming.py` and `with_streaming_response` helpers.
- Retry/Timeouts: Default retry/backoff behavior is in `_base_client.py`. TCP warming occurs by default when constructing clients (`warm_tcp_connection=True`).

**Developer Workflows (quick commands)**
- Setup (recommended): `./scripts/bootstrap` which uses `rye` to provision the environment.
- Tests: `./scripts/test` (tests use `pytest -n auto` and `respx` for HTTP mocking). Some tests may require a running mock server (example: `npx prism mock path/to/openapi.yml`).
- Lint/format: `./scripts/lint` and `./scripts/format` (runs `ruff`, `black`, `isort` via `rye run format`).
- Build: `rye build` or `python -m build` (see `CONTRIBUTING.md`).

**Project-specific conventions & patterns**
- Generation: The generator will not modify `src/cerebras/cloud/sdk/lib/` or `examples/`. Manual edits to generated files may persist but can cause merge conflicts on regeneration — prefer adding behavior via wrapper modules or contributors' patterns described in `CONTRIBUTING.md`.
- Types & validation: `pydantic` models are used for responses; type checking is strict (`pyright` strict mode + `mypy` config). Use `pyright` and `mypy` configs in `pyproject.toml` when adding/typing code.
- LRU cache: The project bans `functools.lru_cache` for type reasons and provides an `_utils.lru_cache` alternative (see `pyproject.toml` ruff banned API entry).
- HTTP options: Use `make_request_options(...)` helper to configure per-request timeout/retry/idempotency values; `with_options()` (alias of `copy()`) is idiomatic for per-request overrides.

**Testing & Mocks**
- Most integration-style tests use `respx` to mock `httpx` calls (see tests under `tests/` which frequently use `@pytest.mark.respx`).
- Some tests require the OpenAPI mock server (Prism). `CONTRIBUTING.md` documents `npx prism mock path/to/openapi.yml`.

**Files to check first when debugging or extending**
- `src/cerebras/cloud/sdk/_client.py` — high-level client surface and env var defaults.
- `src/cerebras/cloud/sdk/_base_client.py` — core request/response, retries, timeouts, streaming and pagination machinery.
- `src/cerebras/cloud/sdk/resources/` — resource endpoints; good place to add small surface changes.
- `README.md` and `api.md` — usage examples that are exercised by tests (search for `<!-- RUN TEST:` snippets).
- `CONTRIBUTING.md` — local dev setup, build and test guidance.

**Style & CI expectations**
- Formatting: `black` and `ruff` with `line-length = 120`. Run `./scripts/format` to auto-fix.
- Type checking: `pyright` (strict) and `mypy` (configured in `pyproject.toml`).
- Tests run in parallel (`pytest -n auto`) — avoid test inter-dependencies and rely on `respx` fixtures or Prism when needed.

If anything in this doc is unclear or you want more detail about a particular workflow (code generation, contributing changes to generated code, or test setup for CI), tell me which section to expand and I’ll iterate.
